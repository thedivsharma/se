<!DOCTYPE html>
<html lang="en" class="dark">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Product Details - Woodman's World</title>
	<script>
		// Theme init (same as HomePage)
		if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
			document.documentElement.classList.add('dark');
			document.documentElement.classList.remove('light');
		} else {
			document.documentElement.classList.remove('dark');
			document.documentElement.classList.add('light');
		}
	</script>
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
		body { font-family: 'Inter', sans-serif; }
		#app { background-color: #fafaf9; transition: background-color .3s; }
		.dark #app { background-color: #171717; }
		.icon-btn { transition: transform .2s, color .2s; }
		.icon-btn:hover { transform: scale(1.05); color: #d97706; }
	</style>
</head>
<body id="app">
	<!-- Header (same as HomePage, no search/categories) -->
	<header class="sticky top-0 z-50 bg-white dark:bg-neutral-800 shadow-md">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
			<div class="flex items-center justify-between h-16">
				<a href="index.html" class="text-2xl font-bold text-stone-800 dark:text-stone-50 flex items-center">
					<span class="hidden sm:inline">Woodman's World</span>
					<span class="sm:hidden">Woodman's</span>
				</a>
				<div class="flex items-center space-x-4">
					<button onclick="toggleTheme()" class="p-2 text-stone-600 dark:text-stone-300 hover:text-amber-600 dark:hover:text-amber-400 icon-btn rounded-full">
						<svg id="theme-toggle-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"></svg>
					</button>
					<a href="LoginRegister.html" class="hidden md:flex items-center text-stone-600 dark:text-stone-300 hover:text-amber-600 dark:hover:text-amber-400 icon-btn">
						<svg class="w-6 h-6 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
						<span class="text-sm font-medium">Account / Login</span>
					</a>
					<a href="ShoppingCart.html" class="relative p-2 text-stone-600 dark:text-stone-300 hover:text-amber-600 dark:hover:text-amber-400 icon-btn rounded-full">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/></svg>
						<span class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">4</span>
					</a>
				</div>
			</div>
		</div>
	</header>

	<main class="max-w-7xl mx-auto py-8 sm:px-6 lg:px-8">
		<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
			<!-- Image -->
			<div class="bg-white dark:bg-neutral-800 rounded-xl shadow-lg overflow-hidden">
				<img id="product-image" class="w-full h-96 object-cover object-center" src="https://placehold.co/800x600/7c2d12/ffffff?text=Product" alt="Product Image" />
			</div>

			<!-- Details -->
			<div class="space-y-4">
				<h1 id="product-name" class="text-3xl font-extrabold text-stone-800 dark:text-stone-100">Hand-Carved Walnut Bowl</h1>
				<p id="product-artisan" class="text-amber-700 dark:text-amber-400 font-medium">Woodman & Co.</p>
				<p id="product-desc" class="text-stone-600 dark:text-stone-300">A timeless centerpiece for fruit or display.</p>

				<div class="flex items-end space-x-4">
					<p class="text-sm text-stone-500 dark:text-stone-400">Price</p>
					<p id="product-price" class="text-3xl font-bold text-stone-900 dark:text-stone-50">$59.99</p>
				</div>

				<!-- Variant Selectors -->
				<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
					<div>
						<label class="block text-sm font-medium text-stone-700 dark:text-stone-300 mb-1">Size</label>
						<select id="variant-size" class="w-full border border-stone-300 dark:border-neutral-600 dark:bg-neutral-700 dark:text-stone-50 rounded-lg px-3 py-2 focus:ring-amber-500 focus:border-amber-500">
							<!-- filled by JS -->
						</select>
					</div>
					<div>
						<label class="block text-sm font-medium text-stone-700 dark:text-stone-300 mb-1">Color</label>
						<select id="variant-color" class="w-full border border-stone-300 dark:border-neutral-600 dark:bg-neutral-700 dark:text-stone-50 rounded-lg px-3 py-2 focus:ring-amber-500 focus:border-amber-500">
							<!-- filled by JS -->
						</select>
					</div>
				</div>

				<p id="stock-status" class="text-sm"></p>

				<div class="flex items-center space-x-3">
					<label for="qty" class="text-sm text-stone-700 dark:text-stone-300">Qty</label>
					<input id="qty" type="number" min="1" value="1" class="w-20 border border-stone-300 dark:border-neutral-600 dark:bg-neutral-700 dark:text-stone-50 rounded-lg px-3 py-2 focus:ring-amber-500 focus:border-amber-500" />
				</div>

				<div class="flex flex-wrap gap-3 pt-2">
					<button class="px-4 py-2 rounded-lg bg-amber-600 text-white font-semibold hover:bg-amber-700">Add to Cart</button>
					<button class="px-4 py-2 rounded-lg border border-amber-600 text-amber-700 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-neutral-800">Buy Now</button>
					<a id="review-link" href="Review.html" class="px-4 py-2 rounded-lg border border-stone-300 dark:border-neutral-600 text-stone-700 dark:text-stone-200 hover:bg-stone-50 dark:hover:bg-neutral-800">Write a Review</a>
				</div>
			</div>
		</div>
	</main>

	<footer class="bg-neutral-800 dark:bg-neutral-900 mt-12 py-8">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-stone-300 text-center text-sm">
			<p>&copy; 2025 Woodman's World. All rights reserved.</p>
		</div>
	</footer>

	<script>
		// Theme toggle (same as HomePage)
		window.toggleTheme = function() {
			const html = document.documentElement;
			const isDark = html.classList.contains('dark');
			if (isDark) { html.classList.remove('dark'); html.classList.add('light'); localStorage.theme = 'light'; }
			else { html.classList.add('dark'); html.classList.remove('light'); localStorage.theme = 'dark'; }
			updateThemeIcon();
		}
		window.updateThemeIcon = function() {
			const ic = document.getElementById('theme-toggle-icon');
			const isDark = document.documentElement.classList.contains('dark');
			if (ic) ic.innerHTML = isDark
				? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>'
				: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
		}

		// Mock product + variants
		const product = {
			id: 'p1',
			name: 'Hand-Carved Walnut Bowl',
			artisan: 'Woodman & Co.',
			desc: 'A timeless centerpiece for fruit or display.',
			basePrice: 59.99,
			variants: {
				S: { Brown: { priceDelta: 0, stock: 8 }, Natural: { priceDelta: 0, stock: 3 } },
				M: { Brown: { priceDelta: 10, stock: 5 }, Natural: { priceDelta: 10, stock: 0 } },
				L: { Brown: { priceDelta: 20, stock: 2 }, Natural: { priceDelta: 20, stock: 1 } },
			}
		};

		function initProduct() {
			document.getElementById('product-name').textContent = product.name;
			document.getElementById('product-artisan').textContent = product.artisan;
			document.getElementById('product-desc').textContent = product.desc;

			const sizeSelect = document.getElementById('variant-size');
			const colorSelect = document.getElementById('variant-color');

			// populate sizes
			Object.keys(product.variants).forEach(size => {
				const opt = document.createElement('option');
				opt.value = size; opt.textContent = size;
				sizeSelect.appendChild(opt);
			});
			// populate colors based on first size
			updateColors();

			sizeSelect.addEventListener('change', () => {
				updateColors();
				updatePriceAndStock();
			});
			colorSelect.addEventListener('change', updatePriceAndStock);

			updatePriceAndStock();

			// link to review page with productId
			const reviewLink = document.getElementById('review-link');
			reviewLink.href = `Review.html?productId=${encodeURIComponent(product.id)}`;
		}

		function updateColors() {
			const size = document.getElementById('variant-size').value || Object.keys(product.variants)[0];
			const colorSelect = document.getElementById('variant-color');
			colorSelect.innerHTML = '';
			Object.keys(product.variants[size]).forEach(color => {
				const opt = document.createElement('option');
				opt.value = color; opt.textContent = color;
				colorSelect.appendChild(opt);
			});
		}

		function updatePriceAndStock() {
			const size = document.getElementById('variant-size').value || Object.keys(product.variants)[0];
			const color = document.getElementById('variant-color').value || Object.keys(product.variants[size])[0];
			const variant = product.variants[size][color];
			const price = product.basePrice + variant.priceDelta;
			document.getElementById('product-price').textContent = `$${price.toFixed(2)}`;
			const stockEl = document.getElementById('stock-status');
			const inStock = variant.stock > 0;
			stockEl.textContent = inStock ? `In stock: ${variant.stock} available` : 'Out of stock';
			stockEl.className = `text-sm ${inStock ? 'text-green-700 dark:text-green-400' : 'text-red-700 dark:text-red-400'}`;
		}

		window.addEventListener('DOMContentLoaded', () => {
			updateThemeIcon();
			initProduct();
		});
	</script>
</body>
</html>
